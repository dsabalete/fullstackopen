{"version":3,"sources":["services/persons.js","components/Filter.js","components/Form.js","components/Person.js","components/People.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["baseUrl","Filter","handle","filter","onChange","value","Form","handleSubmit","handleChangeName","handleChangeNumber","newName","newNumber","onSubmit","type","Person","person","handleRemove","name","number","onClick","People","persons","deletePerson","p","length","toLowerCase","includes","map","Notification","message","className","Error","App","useState","setPersons","setNewName","setNewNumber","filterBy","setFilterBy","setMessage","messageError","setMessageError","useEffect","axios","get","then","response","data","catch","error","notifyError","notify","msg","setTimeout","e","newFilter","target","preventDefault","window","confirm","prevPerson","personObj","id","updatedObj","put","updatedPersons","concat","newObject","post","delete","status","updatePersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d6210726.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nexport const getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then((response) => response.data)\n}\n\nexport const create = (newObject) => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then((response) => response.data)\n}\n\nexport const remove = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport const update = (id, updatedObj) => {\n    const request = axios.put(`${baseUrl}/${id}`, updatedObj)\n    return request.then((response) => response.data)\n}\n","import React from 'react'\n\nconst Filter = ({ handle, filter }) => (\n    <div>\n        filter shown with <input onChange={handle} value={filter} />\n    </div>\n)\n\nexport default Filter\n","import React from 'react'\n\nconst Form = ({\n    handleSubmit,\n    handleChangeName,\n    handleChangeNumber,\n    newName,\n    newNumber\n}) => (\n    <form onSubmit={handleSubmit}>\n        <div>\n            name: <input onChange={handleChangeName} value={newName} />\n        </div>\n        <div>\n            number: <input onChange={handleChangeNumber} value={newNumber} />\n        </div>\n        <div>\n            <button type='submit'>add</button>\n        </div>\n    </form>\n)\n\nexport default Form\n","import React from 'react'\n\nconst Person = ({ person, handleRemove }) => {\n    return (\n        <div key={person.name}>\n            {person.name} {person.number}{' '}\n            <button onClick={handleRemove}>delete</button>\n        </div>\n    )\n}\n\nexport default Person\n","import React from 'react'\nimport Person from './Person'\n\nconst People = ({ persons, filter, deletePerson }) => {\n    return (\n        <div>\n            {persons\n                .filter((p) => {\n                    if (filter.length) {\n                        return p.name.toLowerCase().includes(filter)\n                    } else {\n                        return true\n                    }\n                })\n                .map((person) => (\n                    <Person\n                        key={person.name}\n                        person={person}\n                        handleRemove={() => deletePerson(person)}\n                    />\n                ))}\n        </div>\n    )\n}\n\nexport default People\n","import React from 'react'\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n\n    return <div className='message'>{message}</div>\n}\n\nexport default Notification\n","import React from 'react'\n\nconst Error = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n\n    return <div className='error'>{message}</div>\n}\n\nexport default Error\n","import React, { useState, useEffect } from 'react'\nimport { getAll, create, remove, update } from './services/persons'\nimport Filter from './components/Filter'\nimport Form from './components/Form'\nimport People from './components/People'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [filterBy, setFilterBy] = useState('')\n    const [message, setMessage] = useState(null)\n    const [messageError, setMessageError] = useState(null)\n\n    useEffect(() => {\n        getAll()\n            .then((persons) => {\n                setPersons(persons)\n            })\n            .catch((error) => {\n                notifyError(`Error while getting contacts from Phonebook`)\n            })\n    }, [])\n\n    const notify = (msg) => {\n        setMessage(msg)\n        setTimeout(() => {\n            setMessage(null)\n        }, 5000)\n    }\n\n    const notifyError = (error) => {\n        setMessageError(error)\n        setTimeout(() => {\n            setMessageError(null)\n        }, 5000)\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        if (newName.length) {\n            if (persons.map((person) => person.name).includes(newName)) {\n                const resp = window.confirm(\n                    `${newName} is already added to the phonebook, replace the old number with the new one?`\n                )\n                if (resp) {\n                    const prevPerson = persons.filter(\n                        (p) => p.name === newName\n                    )[0]\n\n                    const personObj = { ...prevPerson, number: newNumber }\n\n                    update(personObj.id, personObj)\n                        .then((response) => {\n                            const updatedObj = response\n                            const updatedPersons = persons\n                                .filter((p) => p.id !== personObj.id)\n                                .concat(updatedObj)\n                            setPersons(updatedPersons)\n                            notify(\n                                `${updatedObj.name}'s number has been updated`\n                            )\n                        })\n                        .catch((error) => {\n                            notifyError(\n                                `Information of ${personObj.name} has already removed from server`\n                            )\n                            setPersons(\n                                persons.filter((p) => p.id !== personObj.id)\n                            )\n                        })\n                }\n            } else {\n                const personObj = {\n                    name: newName,\n                    number: newNumber\n                }\n                create(personObj)\n                    .then((person) => {\n                        setPersons(persons.concat(person))\n                        notify(`${person.name} has been added to the phonebook`)\n                    })\n                    .catch((error) => {\n                        notifyError(\n                            `Something went wrong while creating a new person`\n                        )\n                    })\n            }\n            setNewName('')\n            setNewNumber('')\n        }\n    }\n\n    const handleChangeName = (e) => {\n        setNewName(e.target.value)\n    }\n\n    const handleChangeNumber = (e) => {\n        setNewNumber(e.target.value)\n    }\n\n    const handleFilter = (e) => {\n        const newFilter = e.target.value\n        setFilterBy(newFilter.toLowerCase())\n    }\n\n    const handleDeletePerson = (person) => {\n        const resp = window.confirm(`Delete ${person.name}?`)\n        if (resp) {\n            remove(person.id)\n                .then((response) => {\n                    if (response.status === 204) {\n                        const updatePersons = persons.filter(\n                            (p) => p.id !== person.id\n                        )\n                        setPersons(updatePersons)\n                        notify(`${person.name} has been removed from phonebook`)\n                    }\n                })\n                .catch((error) => {\n                    notifyError(\n                        `Something went wrong while removing person in phonebook`\n                    )\n                })\n        }\n    }\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n\n            <Notification message={message} />\n            <Error message={messageError} />\n\n            <Filter handle={handleFilter} filter={filterBy} />\n\n            <h3>add a new</h3>\n\n            <Form\n                handleSubmit={handleSubmit}\n                handleChangeName={handleChangeName}\n                handleChangeNumber={handleChangeNumber}\n                newName={newName}\n                newNumber={newNumber}\n            />\n\n            <h2>Numbers</h2>\n\n            <People\n                persons={persons}\n                filter={filterBy}\n                deletePerson={handleDeletePerson}\n            />\n        </div>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}